# Quick Start - Opening in IntelliJ IDEA

## Steps to Open the Project

### 1. Open in IntelliJ IDEA

1. Launch IntelliJ IDEA
2. Click **Open** (or File â†’ Open)
3. Navigate to the directory where you cloned/checked out the `SharpBasicPlugin` project
4. Click **Open**

### 2. Import Gradle Project

IntelliJ will detect this as a Gradle project. You'll see a notification:

**"Gradle wrapper files are not found. Would you like to use Gradle from..."**

Choose one of these options:
- âœ… **"Gradle from wrapper"** - Recommended (IntelliJ will download Gradle 8.5)
- âœ… **"Use bundled Gradle"** - Also works (uses IntelliJ's Gradle)

Click **OK** and wait for IntelliJ to sync the project.

### 3. Fix Gradle Wrapper (if needed)

If IntelliJ can't set up the wrapper automatically, open the Terminal in IntelliJ and run:

```bash
gradle wrapper --gradle-version 8.5
```

Then reload the Gradle project: **View â†’ Tool Windows â†’ Gradle â†’ ğŸ”„ Reload**

### 4. Generate Lexer and Parser

The project won't compile yet because generated files are missing. You need to generate them:

**Method A: Via Terminal** (Recommended - Most Reliable)
```bash
./gradlew generateLexer generateParser
```
After completion, right-click project root â†’ **Reload from Disk**

**Method B: Via Gradle Tool Window**
1. Open: **View â†’ Tool Windows â†’ Gradle**
2. Click the **Execute Gradle Task** button (âš™ï¸ icon or elephant icon) at the top
3. Type: `generateLexer` and press Enter (wait for completion)
4. Type: `generateParser` and press Enter (wait for completion)
5. Right-click project root â†’ **Reload from Disk**

**Alternative:** If you see the tasks in the Gradle window tree (they may appear at the root level or under various categories), you can double-click them directly.

### 5. Build the Project

After generation, build the project:
- Click **Build â†’ Build Project** (Cmd+F9 / Ctrl+F9)
- Or in Gradle window: `Tasks â†’ intellij â†’ buildPlugin`

### 6. Run in Sandbox IDE

Test the plugin:
- **Run â†’ Run 'Run Plugin'**
- Or in Gradle window: `Tasks â†’ intellij â†’ runIde`

This launches a sandbox IntelliJ with your plugin installed.

### 7. Test with Examples

In the sandbox IDE:
1. Open `examples/hello.bas`
2. Verify:
   - âœ… Syntax highlighting works (keywords in blue, strings in green)
   - âœ… Code completion works (Ctrl+Space after typing "PR")
   - âœ… File icon shows in project tree

---

## Expected Initial State

When you first open the project, you'll see **red error markers** like:

```
Cannot resolve symbol 'SharpBasicParser'
Cannot resolve symbol 'SharpBasicTypes'
```

**This is normal!** These files don't exist yet because they're generated by Gradle tasks.

After running `generateLexer` and `generateParser`, the errors will disappear.

---

## Troubleshooting

### "Cannot find Gradle wrapper jar"

**Solution**: IntelliJ should auto-download it. If not:
```bash
# In IntelliJ Terminal:
gradle wrapper --gradle-version 8.5
```

### "Java version mismatch"

**Solution**: Set Project SDK to Java 21:

âš ï¸ **IMPORTANT**: Use Java 21. Java 25 is NOT compatible with Gradle 8.5.

1. **File â†’ Project Structure â†’ Project**
2. Set **SDK** to Java 21 (or download if missing)
3. If you have Java 25 installed, make sure to select Java 21 instead

### "Invalid Gradle JDK configuration found"

**Solution**: Configure the Gradle JDK to Java 21:

âš ï¸ **IMPORTANT**: Use Java 21. Java 25 is NOT compatible with Gradle 8.5.

1. **File â†’ Settings â†’ Build, Execution, Deployment â†’ Build Tools â†’ Gradle** (on Mac: **IntelliJ IDEA â†’ Settings**)
2. Under **Gradle JDK**, select **Java 21**
3. If Java 21 is not available, click **Download JDK** and select version 21
4. **Avoid Java 25** - it will cause Gradle build failures
5. Click **OK** and let IntelliJ reload the Gradle project

### "Plugin requires IntelliJ 2023.2 or later"

**Solution**: Update IntelliJ IDEA or change `platformVersion` in `gradle.properties`

### Red errors after generating code

**Solution**: Force IntelliJ to recognize the generated sources:
1. **File â†’ Reload All from Disk**
2. **File â†’ Invalidate Caches â†’ Invalidate and Restart**

---

## Project Structure After Setup

```
SharpBasicPlugin/
â”œâ”€â”€ src/main/
â”‚   â”œâ”€â”€ java/                 # Your source code (no errors)
â”‚   â”œâ”€â”€ gen/                  # Generated code (appears after Gradle tasks)
â”‚   â”‚   â”œâ”€â”€ ch/erzberger/sharpbasic/lexer/
â”‚   â”‚   â”‚   â””â”€â”€ SharpBasicLexer.java
â”‚   â”‚   â””â”€â”€ ch/erzberger/sharpbasic/parser/
â”‚   â”‚       â”œâ”€â”€ SharpBasicParser.java
â”‚   â”‚       â””â”€â”€ SharpBasicTypes.java
â”‚   â””â”€â”€ resources/
â”œâ”€â”€ build/                    # Appears after first build
â””â”€â”€ .idea/                    # IntelliJ metadata (auto-created)
```

---

## Summary

1. âœ… Open project in IntelliJ
2. âœ… Let IntelliJ import Gradle (choose wrapper or bundled)
3. âš ï¸ Expect red errors initially (generated code missing)
4. âœ… Run `generateLexer` and `generateParser` from Gradle window
5. âœ… Build project
6. âœ… Run in sandbox and test
7. ğŸ‰ Plugin works!

**Estimated time**: 5-10 minutes from open to running sandbox.
